function unveil(){$(".lazy").unveil(0,function(){loadingWarning($(this)),$(this).load(function(){this.style.opacity=1,loadingWarning($(this)),$(this).removeClass("lazy")})})}function doOnOrientationChange(){switch(location.reload(),window.orientation){case-90:break;case 90:}}function getImageSize(n,e){function i(){a||(a=!0,clearInterval(t),n.off("load",o),e.apply(this,arguments))}n=$(n);var t=setInterval(function(){var e=n.width(),t=n.height();e&&t&&i(e,t)},0),o;n.on("load",o=function(){i(n.width(),n.height())});var a=!1}function textNormalise(n){$(n+" span").css("font-size","20px")}function textEffectResizingDown(n){var e=$(n).text();$(n).html("");for(var i=0;i<e.length;i++)$(n).append('<span style="font-size: '+(20-18/e.length*i)+'px;">'+e.charAt(i)+"</span>")}function closePopup(){$("#content-container-portfolio").show(),$(".popupContent").remove()}function getPortfolio(n){addFullscreenPopup(n),$.ajax({method:"POST",url:"/portfolio/entries",data:{entryId:n}}).done(function(e){$(".popupContent").html(e),$("#portfolio-main-container").append('<div class="button-close-wrapper"><div class="button-close" id="button-close-portfolio-entry"></div></div>'),"portfolio-entry-1"===n&&textEffectResizingDown("#portfolio-1-lower-subtitle"),$(".popupContent").animate({opacity:1,top:0,left:0,"min-height":height,width:width},500,function(){$("#content-container-portfolio").hide()})}).fail(function(){})}function addFullscreenPopup(n){$("#innerBody").append('<div id="popupContent-'+n+'" class="popupContent"></div>'),$(".popupContent").css({position:"absolute",top:$("#"+n).offset().top,left:$("#"+n).offset().left,width:"0px"})}function zoomImageFullScreen(n){if("cv-image"===n)var e="https://s3-us-west-2.amazonaws.com/sidneysservices/personaldocuments/TamTran-CV.jpg";if(0===$("#fullscreen-blur").length){$("#innerBody").append('<div id="fullscreen-blur"></div>');var i=$("#"+n).clone().attr({id:"enlargened-image"});$("#fullscreen-blur").html(i);var t=$("#"+n)[0].naturalWidth/$("#"+n)[0].naturalHeight;if(t>fnWindowWidth()/fnWindowHeight())var o=fnWindowWidth(),a=o/t,r=(fnWindowHeight()-a)/2,s=0;else var a=fnWindowHeight(),o=a*t,r=0,s=(fnWindowWidth()-o)/2;var c=$("#"+n).offset().top,l=$("#"+n).offset().left,d=$("#"+n).height(),h=$("#"+n).width();$("#enlargened-image").css({position:"fixed",height:d,width:h,top:c,left:l,"z-index":"5"}),$("#enlargened-image").animate({height:a,width:o,top:r,left:s},300,function(){if(void 0!=e&&""!=e&&i!=$("#"+n).attr("src")){var i=new Image;i.src=e,$("#enlargened-image").attr("src",e)}})}else manualZoomming("#cv-image")}function manualZoomming(n){}function dismissFullscreenImage(){$("#fullscreen-blur").animate({opacity:"0"},300,function(){$("#fullscreen-blur").remove()})}function getPages(n){isGettingNewContent=!0;for(var e=0;e<$("img").length;e++)getImageSize($("img")[e],function(n,i){$($("img")[e]).height(i),$($("img")[e]).width(n)});clearInterval(bannerSwitchingInterval),pageTransform(n),$.ajax({method:"POST",url:"/"+n,data:{}}).done(function(e){e!==arrayOfPagesContent[n]?(arrayOfPagesContent[n]=e,$("#content-container-"+n).html(e)):isGettingNewContent=!1}).fail(function(){})}function pageTransform(n){checkExistedPage(n)||($("#innerBody").append('<div class="content-container" id="content-container-'+n+'"></div>'),pagesArray.push(n),$("#content-container-"+n).css({width:"100vw",top:fnWindowHeight()})),settleUpIndexPage(n)}function settleUpIndexPage(n){isMenuCollapsed=!1,$(".ch-item").css("background-color","rgba(0,0,0,0)"),$("#"+n).css("background-color","rgba(112,188,217, 0.5)"),$(".ch-item-li").removeClass("clicked"),$("#ch-item-li-"+n).addClass("clicked"),collapsingMenu(n)}function collapsingMenu(n){if($("#mobile-menu").length>0)if(isMenuCollapsed)$("#mobile-menu .ch-grid .ch-item-li").slideDown(),isMenuCollapsed=!1;else{for(var e=0;e<$(".ch-item-li").length;e++)e===$(".ch-item-li").length-2?$("#"+$(".ch-item-li")[e+1].id).hasClass("clicked")?($("#"+$(".ch-item-li")[e].id).slideUp("fast",function(){"menu"!=n&&resetPagesPosition(n)}),e++):$("#"+$(".ch-item-li")[e].id).hasClass("clicked")||$("#"+$(".ch-item-li")[e].id).slideUp("fast"):(e===$(".ch-item-li").length-1&&$("#"+$(".ch-item-li")[e].id).slideUp("fast",function(){"menu"!=n&&resetPagesPosition(n)}),$("#"+$(".ch-item-li")[e].id).hasClass("clicked")||$("#"+$(".ch-item-li")[e].id).slideUp("fast"));isMenuCollapsed=!0}else resetPagesPosition(n)}function resetPagesPosition(n){for(var e=!1,i=0;i<pagesArray.length;i++)e?($("#content-container-"+pagesArray[i]).css({position:"absolute",top:$(".navigator-top").height()}),$("#content-container-"+pagesArray[i]).animate({top:fnWindowHeight()},500,function(){$(this).hide()})):resetPagesComeBeforeTheSelected(pagesArray[i],n),pagesArray[i]===n&&(e=!0)}function resetPagesComeBeforeTheSelected(n,e){n!=e?($("#content-container-"+n).css({position:"absolute",top:$(".navigator-top").height()}),$("#content-container-"+n).animate({top:fnWindowHeight()/2},500,function(){$("#content-container-"+n).hide(10)})):($("#content-container-"+n).css({position:"relative"}),$("#content-container-"+n).show(),$("#content-container-"+n).animate({top:0,"min-height":fnWindowHeight()-$(".navigator-top").height()},500,function(){}))}function checkExistedPage(n){for(var e=0;e<pagesArray.length;e++)if(pagesArray[e]===n)return!0;return!1}function checkExistedPageAndDelete(n){for(var e=0;e<pagesArray.length;e++)pagesArray[e]===n&&pagesArray.splice(e,1);return!1}function box_width(){return fnWindowWidth()/horizontal_pieces}function box_height(){return fnWindowHeight()/vertical_pieces}function fnWindowHeight(){return window.innerHeight>0?window.innerHeight:screen.height}function fnWindowWidth(){return window.innerWidth>0?window.innerWidth:screen.width}function switchBanners(){bannerHovers=new Array,currentHoverCount=0,arrayOfAnimation=[toggleDisplayMosaicDissolve,toggleDisplayDissolve];var n=$("#banner1");for(n.width(fnWindowWidth()).height(fnWindowHeight()),horizontal_pieces=5,vertical_pieces=5,total_pieces=horizontal_pieces*vertical_pieces,i=0;i<total_pieces;i++){var e=$('<span class="hover" id="hover-'+i+'"></span>');n.append(e),bannerHovers.push(e)}$("#banner1 .hover").width(box_width()).height(box_height()),getBanner("#banner1");var t=0;bannerSwitchingInterval=setInterval(function(){getBanner("0"===bannerHovers[0].css("opacity")?"#banner1 span.hover":"#banner1")},5e3)}function spinning(){$("#spinning-container").append('<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'),addSpinningInterval=setInterval(function(){$("#spinning-container").append('<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'),$(".spinner").length>10&&(clearInterval(addSpinningInterval),$("#spinning-container").html(""))},1e3)}function removeSpinning(){"undefined"!=typeof addSpinningInterval&&clearInterval(addSpinningInterval),$("#spinning-container").html("")}function getBanner(n){$("#banner1").width(fnWindowWidth()).height(fnWindowHeight()),$("#banner1 .hover").width(box_width()).height(box_height()),$.ajax({method:"POST",url:"/banners",data:{}}).done(function(e){if("0"===e.error){pic=new Image,pic.src=e.url,setBannerHoversPosition(pic.naturalHeight,pic.naturalWidth,n),$(n).css("background-image",'url("'+pic.src+'")');var i=Math.floor(Math.random()*arrayOfAnimation.length+1);arrayOfAnimation[i%arrayOfAnimation.length](),removeSpinning(),spinning()}}).fail(function(){})}function loadingWarning(n){n.siblings(".loadingCon").length>0?n.siblings(".loadingCon").remove():n.parent().append('<div class="loadingCon"><div class="cssload-loader"><div class="cssload-dot"></div><div class="cssload-dot"></div><div class="cssload-dot"></div><div class="cssload-dot"></div><div class="cssload-dot"></div><div class="cssload-dot"></div><div class="cssload-dot"></div><div class="cssload-dot"></div></div></div>')}function setBannerHoversPosition(n,e,t){var o=e/n,a=fnWindowWidth()/fnWindowHeight();if(o>a){var r=fnWindowHeight()/n;$(t).css("background-size",r*e+"px "+fnWindowHeight()+"px");var s=0,c=(e*fnWindowHeight()/n-box_width()*horizontal_pieces)/2}else{var r=fnWindowWidth()/e;$(t).css("background-size",fnWindowWidth()+"px "+r*n+"px");var c=0,s=(n*fnWindowWidth()/e-box_height()*vertical_pieces)/2}if("#banner1"!=t)for(i=0;i<total_pieces;i++){var l=c+i%horizontal_pieces*box_width();i>0&&i%horizontal_pieces===0&&(s+=box_height()),bannerHovers[i].css("background-position","-"+l+"px -"+s+"px")}else $(t).css("background-position","-"+c+"px -"+s+"px")}function toggleDisplayMosaicDissolve(){var n=bannerHovers[currentHoverCount];if(0===currentHoverCount){var e=n.css("opacity");"0"===e?isBannerHoverTransparent=!0:isBannerHoverTransparent=!1}isBannerHoverTransparent?(n.css({"box-shadow":"10px 10px 10px rgba(0,0,0,0.5)"}),n.animate({opacity:"1"})):(n.css({"box-shadow":""}),n.animate({opacity:"0"})),currentHoverCount+1<total_pieces?(currentHoverCount=(currentHoverCount+1)%total_pieces,setTimeout(toggleDisplayMosaicDissolve,50)):currentHoverCount=0}function toggleDisplayMosaicFlip(){var n=bannerHovers[currentHoverCount];if(0===currentHoverCount){var e=n.css("opacity");"0"===e?isBannerHoverTransparent=!0:isBannerHoverTransparent=!1}isBannerHoverTransparent?(n.css({"box-shadow":"10px 10px 10px rgba(0,0,0,1)"}),n.animate({opacity:1},150),n.animateRotate(360,300,"linear",function(){})):(n.css({"box-shadow":""}),n.animate({opacity:0},150),n.animateRotate(360,300,"linear",function(){})),currentHoverCount+1<total_pieces?(currentHoverCount=(currentHoverCount+1)%total_pieces,setTimeout(toggleDisplayMosaicFlip,100)):currentHoverCount=0}function toggleDisplayFlip(){var n=bannerHovers[currentHoverCount];if(0===currentHoverCount){var e=n.css("opacity");"0"===e?isBannerHoverTransparent=!0:isBannerHoverTransparent=!1}isBannerHoverTransparent?($("#banner1 .hover").animate({opacity:1},250),$("#banner1 .hover").animateRotate(360,500,"linear",function(){})):($("#banner1 .hover").animate({opacity:0},250),$("#banner1 .hover").animateRotate(360,500,"linear",function(){})),currentHoverCount=0}function toggleDisplayDissolve(){var n=bannerHovers[currentHoverCount];if(0===currentHoverCount){var e=n.css("opacity");"0"===e?isBannerHoverTransparent=!0:isBannerHoverTransparent=!1}isBannerHoverTransparent?$("#banner1 .hover").animate({opacity:1}):$("#banner1 .hover").animate({opacity:0}),currentHoverCount=0}$(document).ready(function(){height=window.innerHeight>0?window.innerHeight:screen.height,width=window.innerWidth>0?window.innerWidth:screen.width,$("html").hasClass("ios")&&$("body").css({"min-height":height}),$(".lazy").unveil(),isGettingNewContent=!0,$(document).ajaxStop(function(){isGettingNewContent&&unveil()}),isBannerHoverTransparent=!0,switchBanners(),pagesArray=new Array,arrayOfPagesContent=new Array,$("html").hasClass("desktop")?$("#mobile-menu").remove():($("#desktop-menu").remove(),$("body").on("click","#menu-expanding",function(){collapsingMenu("menu")})),isMenuCollapsed=!0,""!=window.location.hash?getPages(window.location.hash.split("#")[1]):$("#mobile-menu .ch-grid .ch-item-li").slideUp("fast"),$(".ch-item").click(function(){history.pushState?history.pushState(null,null,"#"+this.id):window.location.hash=this.id,getPages(this.id)}),$("body").on("click",".thumbnail-image",function(){currentZoommingImage=this.id,zoomImageFullScreen(this.id)}),$("body").on("click","#fullscreen-blur",function(){dismissFullscreenImage()}),$("body").on("click","#button-cv",function(){}),$("body").on("click",".portfolio-entry",function(){getPortfolio(this.id)}),$("body").on("click","#button-close-portfolio-entry",function(){closePopup()}),$("body").on("mouseover","#portfolio-1-lower-subtitle",function(){textNormalise("#portfolio-1-lower-subtitle"),$("#portfolio-alert-message").hide()}),$("body").on("mouseleave","#portfolio-1-lower-subtitle",function(){textEffectResizingDown("#portfolio-1-lower-subtitle"),$("#portfolio-alert-message").show()})}),window.addEventListener("orientationchange",doOnOrientationChange),$.fn.animateRotate=function(n,e,i,t){var o=$.speed(e,i,t),a=o.step;return this.each(function(e,i){o.step=function(n){if($.style(i,"transform","rotateX("+n+"deg)"),a)return a.apply(this,arguments)},$({deg:0}).animate({deg:n},o)})};